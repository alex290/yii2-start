<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        
<link href="./assets/1728b664/css/bootstrap.css" rel="stylesheet">
<link href="./assets/9c5d0894/solarized_light.css" rel="stylesheet">
<link href="./assets/f2ce5bcd/style.css" rel="stylesheet">
<script src="./assets/bbf84a7a/jquery.js"></script>
<script src="./assets/1728b664/js/bootstrap.js"></script>
<script src="./assets/fd63b446/jssearch.js"></script>    <title>Консольные команды - Специальные темы - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w1555" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w1555-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">The Definitive Guide to Yii 2.0</a></div><div id="w1555-collapse" class="collapse navbar-collapse"><ul id="w1556" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Extensions <span class="caret"></span></a><ul id="w1557" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-authclient-index.html" tabindex="-1">authclient</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-elasticsearch-index.html" tabindex="-1">elasticsearch</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-httpclient-index.html" tabindex="-1">httpclient</a></li>
<li><a href="./ext-imagine-index.html" tabindex="-1">imagine</a></li>
<li><a href="./ext-jui-index.html" tabindex="-1">jui</a></li>
<li><a href="./ext-mongodb-index.html" tabindex="-1">mongodb</a></li>
<li><a href="./ext-redis-index.html" tabindex="-1">redis</a></li>
<li><a href="./ext-shell-index.html" tabindex="-1">shell</a></li>
<li><a href="./ext-smarty-index.html" tabindex="-1">smarty</a></li>
<li><a href="./ext-sphinx-index.html" tabindex="-1">sphinx</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li>
<li><a href="./ext-twig-index.html" tabindex="-1">twig</a></li></ul></li>
<li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-1539" data-toggle="collapse" data-parent="#navigation">Введение <b class="caret"></b></a><div id="navigation-1539" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">О Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Обновление с версии 1.1</a></div>
<a class="list-group-item" href="#navigation-1540" data-toggle="collapse" data-parent="#navigation">Первое знакомство <b class="caret"></b></a><div id="navigation-1540" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Установка Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Запуск приложения</a>
<a class="list-group-item" href="./guide-start-hello.html">Говорим «привет»</a>
<a class="list-group-item" href="./guide-start-forms.html">Работа с формами</a>
<a class="list-group-item" href="./guide-start-databases.html">Работа с базами данных</a>
<a class="list-group-item" href="./guide-start-gii.html">Генерация кода при помощи Gii</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Что дальше?</a></div>
<a class="list-group-item" href="#navigation-1541" data-toggle="collapse" data-parent="#navigation">Структура приложения <b class="caret"></b></a><div id="navigation-1541" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Входные скрипты</a>
<a class="list-group-item" href="./guide-structure-applications.html">Приложения</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Компоненты приложения</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Контроллеры</a>
<a class="list-group-item" href="./guide-structure-models.html">Модели</a>
<a class="list-group-item" href="./guide-structure-views.html">Представления</a>
<a class="list-group-item" href="./guide-structure-modules.html">Модули</a>
<a class="list-group-item" href="./guide-structure-filters.html">Фильтры</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Виджеты</a>
<a class="list-group-item" href="./guide-structure-assets.html">Ресурсы</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Расширения</a></div>
<a class="list-group-item" href="#navigation-1542" data-toggle="collapse" data-parent="#navigation">Обработка запросов <b class="caret"></b></a><div id="navigation-1542" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Разбор и генерация URL</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Запросы</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Ответы</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Сессии и куки</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Обработка ошибок</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Логирование</a></div>
<a class="list-group-item" href="#navigation-1543" data-toggle="collapse" data-parent="#navigation">Основные понятия <b class="caret"></b></a><div id="navigation-1543" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">Компоненты</a>
<a class="list-group-item" href="./guide-concept-properties.html">Свойства</a>
<a class="list-group-item" href="./guide-concept-events.html">События</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Поведения</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Конфигурации</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Псевдонимы</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Автозагрузка классов</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-1544" data-toggle="collapse" data-parent="#navigation">Работа с базами данных <b class="caret"></b></a><div id="navigation-1544" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Объекты доступа к данным (DAO)</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Построитель запросов</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Миграции</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-sphinx/blob/master/docs/guide-ru/README.md">Sphinx</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-redis/blob/master/docs/guide-ru/README.md">Redis</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-mongodb/blob/master/docs/guide-ru/README.md">MongoDB</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-elasticsearch/blob/master/docs/guide-ru/README.md">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-1545" data-toggle="collapse" data-parent="#navigation">Получение данных от пользователя <b class="caret"></b></a><div id="navigation-1545" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Создание форм</a>
<a class="list-group-item" href="./guide-input-validation.html">Валидация</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Загрузка файлов</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Табличный ввод</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Работа с несколькими моделями</a>
<a class="list-group-item" href="./guide-input-form-javascript.html">Расширение ActiveForm на стороне клиента</a></div>
<a class="list-group-item" href="#navigation-1546" data-toggle="collapse" data-parent="#navigation">Отображение данных <b class="caret"></b></a><div id="navigation-1546" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatting.html">Форматирование данных</a>
<a class="list-group-item" href="./guide-output-pagination.html">Постраничная разбивка</a>
<a class="list-group-item" href="./guide-output-sorting.html">Сортировка</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Провайдеры данных</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Виджеты для данных</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Работа с клиентскими скриптами</a>
<a class="list-group-item" href="./guide-output-theming.html">Темизация</a></div>
<a class="list-group-item" href="#navigation-1547" data-toggle="collapse" data-parent="#navigation">Безопасность <b class="caret"></b></a><div id="navigation-1547" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-security-authentication.html">Аутентификация</a>
<a class="list-group-item" href="./guide-security-authorization.html">Авторизация</a>
<a class="list-group-item" href="./guide-security-passwords.html">Работа с паролями</a>
<a class="list-group-item" href="./guide-security-cryptography.html">Криптография</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-authclient/blob/master/docs/guide-ru/README.md">Клиенты авторизации</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Лучшие практики</a></div>
<a class="list-group-item" href="#navigation-1548" data-toggle="collapse" data-parent="#navigation">Кеширование <b class="caret"></b></a><div id="navigation-1548" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-caching-data.html">Кэширование данных</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Кэширование фрагментов</a>
<a class="list-group-item" href="./guide-caching-page.html">Кэширование страниц</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP кэширование</a></div>
<a class="list-group-item" href="#navigation-1549" data-toggle="collapse" data-parent="#navigation">Веб-сервисы REST <b class="caret"></b></a><div id="navigation-1549" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Быстрый старт</a>
<a class="list-group-item" href="./guide-rest-resources.html">Ресурсы</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Контроллеры</a>
<a class="list-group-item" href="./guide-rest-routing.html">Роутинг</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Форматирование ответа</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Аутентификация</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Ограничение частоты запросов</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Версионирование</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Обработка ошибок</a></div>
<a class="list-group-item" href="#navigation-1550" data-toggle="collapse" data-parent="#navigation">Инструменты разработчика <b class="caret"></b></a><div id="navigation-1550" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-debug/blob/master/docs/guide/README.md">Отладочная панель и отладчик</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-gii/blob/master/docs/guide/README.md">Генерация кода с Gii</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-apidoc">Генератор документации API</a></div>
<a class="list-group-item" href="#navigation-1551" data-toggle="collapse" data-parent="#navigation">Тестирование <b class="caret"></b></a><div id="navigation-1551" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Настройка тестового окружения</a>
<a class="list-group-item" href="./guide-test-unit.html">Модульные тесты</a>
<a class="list-group-item" href="./guide-test-functional.html">Функциональные тесты</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Приёмочные тесты</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Фикстуры</a></div>
<a class="list-group-item active" href="#navigation-1552" data-toggle="collapse" data-parent="#navigation">Специальные темы <b class="caret"></b></a><div id="navigation-1552" class="submenu panel-collapse collapse in"><a class="list-group-item" href="https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md">Шаблон приложения advanced</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Создание приложения с нуля</a>
<a class="list-group-item active" href="./guide-tutorial-console.html">Консольные команды</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Встроенные валидаторы</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Интернационализация</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Отправка почты</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Оптимизация производительности</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Окружение виртуального хостинга</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Шаблонизаторы</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Работа со сторонним кодом</a>
<a class="list-group-item" href="./guide-tutorial-yii-as-micro-framework.html">Использование Yii в качестве микро-framework&#039;а</a></div>
<a class="list-group-item" href="#navigation-1553" data-toggle="collapse" data-parent="#navigation">Виджеты <b class="caret"></b></a><div id="navigation-1553" class="submenu panel-collapse collapse"><a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html">GridView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-listview.html">ListView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html">DetailView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform">ActiveForm</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html">Pjax</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-menu.html">Menu</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html">LinkPager</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html">LinkSorter</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-ru/README.md">Виджеты Bootstrap</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-ru/README.md">Виджеты Jquery UI</a></div>
<a class="list-group-item" href="#navigation-1554" data-toggle="collapse" data-parent="#navigation">Хелперы <b class="caret"></b></a><div id="navigation-1554" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url хелпер</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Консольное приложение <span id="konsolnoe-prilozenie"></span><a href="#konsolnoe-prilozenie" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#usage">Использование</a></li>
<li><a href="#entry-script">Входной скрипт</a></li>
<li><a href="#configuration">Настройка</a></li>
<li><a href="#console-command-completion">Автодополнение консольных команд</a></li>
<li><a href="#create-command">Создание ваших собственных команд</a></li></ol></div>
<p>Кроме богатых возможностей для построения веб приложений, Yii также имеет полноценную поддержку консольных приложений,
которые обычно используются для создания фоновых и служебных задач, поддерживающих сайт.</p>
<p>Структура консольных приложений очень похожа на структуру веб приложения. Она состоит из одного и более классов
<a href="./yii-console-controller.html">yii\console\Controller</a>, которые часто называют командами в консольной среде. Каждый контроллер может иметь одно
или более действий, как и веб контроллеры.</p>
<p>В обоих шаблонах проектов уже есть консольное приложение.
Вы можете запустить его, вызвав скрипт yii, который находится в основной директории вашего приложения.
Вы получите список доступных команд, если вызовете его без параметров:</p>
<p><img src="images/tutorial-console-help.png" alt="Запуск команды ./yii для вывода помощи" /></p>
<p>Как вы можете видеть на скриншоте, в Yii уже определён набор доступных по умолчанию команд:</p>
<ul>
<li><a href="./yii-console-controllers-assetcontroller.html">AssetController</a> - Позволяет вам объединять и сжимать ваши JavaScript и CSS файлы.
Больше об этой команде вы можете узнать в <a href="guide-structure-assets.html#using-asset-bundles">Assets Section</a>.</li>
<li><a href="./yii-console-controllers-cachecontroller.html">CacheController</a> - Позволяет вам сбрасывать кеш приложения.</li>
<li><a href="./yii-console-controllers-fixturecontroller.html">FixtureController</a> - Управляет загрузкой и выгрузкой данных фикстур для тестирования.
Данная команда более подробно описана в <a href="guide-test-fixtures.html#managing-fixtures">Testing Section about Fixtures</a>.</li>
<li><a href="./yii-console-controllers-helpcontroller.html">HelpController</a> - Обеспечивает справочную информацию о консольных командах,
это команда по умолчанию и она печатает текст, который вы видели выше.</li>
<li><a href="./yii-console-controllers-messagecontroller.html">MessageController</a> - Извлекает сообщения для перевода из файлов с исходными тестами.
Больше об этой команде вы можете узнать в <a href="guide-tutorial-i18n.html#message-command">I18N Section</a>.</li>
<li><a href="./yii-console-controllers-migratecontroller.html">MigrateController</a> - Управление миграциями приложения.
Миграции базы данных более детально описаны в <a href="guide-db-migrations.html">Database Migration Section</a>.</li>
<li><a href="./yii-console-controllers-servecontroller.html">ServeController</a> - Позволяет запускать встроенный вебсервер PHP.</li>
</ul>
<h2>Использование  <span id="usage"></span><a href="#usage" class="hashlink">&para;</a></h2><p>Вы можете запустить действие консольного контроллера, используя следующий синтаксис:</p>
<pre><code class="hljs apache"><span class="hljs-attribute">yii</span> &lt;route&gt;<span class="hljs-meta"> [--option1=value1 --option2=value2 ... argument1 argument2 ...]</span>
</code></pre>
<p>В приведённом выше примере, <code>&lt;route&gt;</code> относится к действию контроллера. Параметры будут подставляться в свойства
класса и в аргументы метода действия.</p>
<p>Для примера, <a href="./yii-console-controllers-basemigratecontroller.html#actionUp()-detail">MigrateController::actionUp()</a>
с <a href="./yii-console-controllers-migratecontroller.html#$migrationTable-detail">MigrateController::$migrationTable</a> установкой <code>migrations</code>
и лимитом в 5 миграций может быть вызвано следующим образом:</p>
<pre><code class="hljs nginx"><span class="hljs-attribute">yii</span> migrate/up <span class="hljs-number">5</span> --migrationTable=migrations
</code></pre>
<blockquote class="note"><p><strong>Примечание: </strong>При использовании в консоли <code>*</code>, не забудьте поместить её в кавычки <code>"*"</code> чтобы избежать её интерпретации
и замены на все имена файлов в данной директории.</p>
</blockquote>
<h2>Входной скрипт  <span id="entry-script"></span><a href="#entry-script" class="hashlink">&para;</a></h2><p>Входной скрипт консольного приложения - это подобие файла <code>index.php</code>, используемого в веб приложении.
Входной скрипт консоли, как правило, называется <code>yii</code> и располагается в основной директории приложения.
Он содержит код похожий на следующее:</p>
<pre><code class="hljs php language-php"><span class="hljs-comment">#!/usr/bin/env php</span>
<span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">/**
 * Yii console bootstrap file.
 */</span>

defined(<span class="hljs-string">'YII_DEBUG'</span>) <span class="hljs-keyword">or</span> define(<span class="hljs-string">'YII_DEBUG'</span>, <span class="hljs-keyword">true</span>);
defined(<span class="hljs-string">'YII_ENV'</span>) <span class="hljs-keyword">or</span> define(<span class="hljs-string">'YII_ENV'</span>, <span class="hljs-string">'dev'</span>);

<span class="hljs-keyword">require</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/vendor/autoload.php'</span>;
<span class="hljs-keyword">require</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/vendor/yiisoft/yii2/Yii.php'</span>;

$config = <span class="hljs-keyword">require</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/config/console.php'</span>;

$application = <span class="hljs-keyword">new</span> yii\console\Application($config);
$exitCode = $application-&gt;run();
<span class="hljs-keyword">exit</span>($exitCode);
</code></pre>
<p>Этот скрипт будет создан как часть вашего приложения; вы можете его редактировать, если вам это необходимо.
<code>YII_DEBUG</code> можете установить в <code>false</code> если вам не нужно видеть отладочный вывод при ошибке, и/или если вы хотите
улучшить общую производительность. В обоих шаблонах приложения, во входном скрипте приложения отладка включена по
умолчанию для обеспечения более дружественного к разработчику окружения.</p>
<h2>Настройка  <span id="configuration"></span><a href="#configuration" class="hashlink">&para;</a></h2><p>Как видно из приведённого выше кода, консольное приложение использует свой собственный файл конфигурации, названый <code>console.php</code>.
В этом файле вы должны произвести настройку различных <a href="guide-structure-application-components.html">компонентов приложения</a> и
свойств консольного приложения.</p>
<p>Если ваше веб и консольное приложение имеет много общих параметров конфигурации, вы можете выделить общую часть в 
отдельный файл, и включить его в оба файла конфигурации (веб и консоль).
Вы можете посмотреть пример в "продвинутом" шаблоне проекта.</p>
<blockquote class="tip"><p><strong>Подсказка: </strong>Иногда, вам может потребоваться запустить консольную команду используя конфигурацию, отличную от той, что
указано во входном скрипте. Для примера, вы можете использовать команду <code>yii migrate</code> для обновления тестовой
базы данных, которая настраивается для каждого отдельного набора тестов. Для изменения файла конфигурации,
просто укажите свой конфигурационный файл через опцию <code>appconfig</code> при запуске команды:</p>
<pre><code class="hljs nginx"><span class="hljs-attribute">yii</span> &lt;route&gt; --appconfig=path/to/config.php ...
</code></pre>
</blockquote>
<h2>Автодополнение консольных команд  <span id="console-command-completion"></span><a href="#console-command-completion" class="hashlink">&para;</a></h2><p>Автодополнение аргументов команд является полезной возможностью при работе в командной строке.
Начиная с версии 2.0.11, команда <code>./yii</code> поддерживает автодополнение для Bash и ZSH. </p>
<h3>Автодополнение для Bash <span id="avtodopolnenie-dla-bash"></span><a href="#avtodopolnenie-dla-bash" class="hashlink">&para;</a></h3><p>Убедитесь, что средства автодополнения для Bash установлены. В большинстве дистрибутивов они поставляются по умолчанию.</p>
<p>Сохраните скрипт для автодополнения в директорию <code>/etc/bash_completion.d/</code>:</p>
<pre><code class="hljs nginx"> <span class="hljs-attribute">curl</span> -L https://raw.githubusercontent.com/yiisoft/yii2/master/contrib/completion/bash/yii -o /etc/bash_completion.d/yii
</code></pre>
<p>Для временного использования, вы можете сохранить файл в произвольную директорию и подключить его на время работы сессии,
вызвав команду <code>source yii</code>.</p>
<p>Если скрипт был установлен глобально, вам потребуется перезапустить терминал или выполнить команду <code>source ~/.bashrc</code> 
для активации автодополнения.</p>
<p>Обратитесь к <a href="https://www.gnu.org/software/bash/manual/html_node/Programmable-Completion.html">инструкции по автодополнению в Bash</a>
чтобы узнать о других способах подключения скриптов автодополнения в ваше окружение.</p>
<h3>Автодополнение для ZSH <span id="avtodopolnenie-dla-zsh"></span><a href="#avtodopolnenie-dla-zsh" class="hashlink">&para;</a></h3><p>Сохраните скрипт автодополнения в директорию для скриптов автодополнения. Например, <code>~/.zsh/completion/</code></p>
<pre><code class="hljs nginx"><span class="hljs-attribute">mkdir</span> -p ~/.zsh/completion
curl -L https://raw.githubusercontent.com/yiisoft/yii2/master/contrib/completion/zsh/_yii -o ~/.zsh/completion/_yii
</code></pre>
<p>Добавьте эту директорию в переменную среды <code>$fpath</code>, например добавив в конец <code>~/.zshrc</code> следующую строку:</p>
<pre><code class="hljs bash">fpath=(~/.zsh/completion <span class="hljs-variable">$fpath</span>)
</code></pre>
<p>Убедитесь, что программа <code>compinit</code> запущена. Если это не так - добавьте в <code>~/.zshrc</code> следующие строки:</p>
<pre><code class="hljs nginx"><span class="hljs-attribute">autoload</span> -Uz compinit &amp;&amp; compinit -i
</code></pre>
<p>Затем перезапустите ваш терминал, либо выполните команду</p>
<pre><code class="hljs nginx"><span class="hljs-attribute">exec</span> <span class="hljs-variable">$SHELL</span> -l
</code></pre>
<h2>Создание ваших собственных команд  <span id="create-command"></span><a href="#create-command" class="hashlink">&para;</a></h2><h3>Консольный контроллер и действие <span id="konsolnyj-kontroller-i-dejstvie"></span><a href="#konsolnyj-kontroller-i-dejstvie" class="hashlink">&para;</a></h3><p>Консольная команда определяется как класс контроллера расширяющий <a href="./yii-console-controller.html">yii\console\Controller</a>. В классе контроллера,
вы определяете одно или несколько действий, которые соответствуют суб-командам контроллера. В каждом действии
вы пишете код, который реализует соответствующие данной суб-команде задачи.</p>
<p>При запуске команды, вам необходимо указать маршрут к действию. Например, маршрут <code>migrate/create</code> вызывает суб-команду,
которая соответствует методу <a href="./yii-console-controllers-basemigratecontroller.html#actionCreate()-detail">MigrateController::actionCreate()</a>.
Если маршрут, предложенный при вызове команды, не содержит указания идентификатора действия, будет вызвано действие
по умолчанию (так же как и в веб приложении).</p>
<h3>Опции <span id="opcii"></span><a href="#opcii" class="hashlink">&para;</a></h3><p>Для переопределения <a href="./yii-console-controller.html#options()-detail">yii\console\Controller::options()</a> метода, вы можете указать опции, которые доступны в консольной
команде (controller/actionID). Метод должен возвращать список публичных атрибутов класса. При запуске команды вы
можете указать значение опций, используя синтаксис <code>--OptionName=OptionValue</code>. Это свяжет <code>OptionValue</code> с атрибутом
<code>OptionName</code> класса контроллера.</p>
<p>Если значение по умолчанию опции - это массив, то при установке этой опции, при выполнении команды, значение будет
преобразовано в массив путём разделения входящей строки по запятым.</p>
<h3>Аргументы <span id="argumenty"></span><a href="#argumenty" class="hashlink">&para;</a></h3><p>Кроме опций, команда может получать аргументы. Аргументы будут переданы в качестве параметров в метод действия,
соответствующего запрошенной суб-команде. Первый аргумент соответствует первому параметру, второй соответственно второму,
и так далее. Если переданных аргументов при вызове команды будет недостаточно, то параметрам будут назначены по
умолчанию, если они определены. Если значения по умолчанию не определены, и не были переданы, команда завершит
выполнение с ошибкой.</p>
<p>Вы можете использовать указание типа <code>array</code>, чтобы указать, что аргумент должен рассматриваться как массив. Массив
будет сгенерирован путём разделения входной строки по запятым.</p>
<h3>Псевдонимы опций <span id="psevdonimy-opcij"></span><a href="#psevdonimy-opcij" class="hashlink">&para;</a></h3><p>Начиная с версии 2.0.8 в классе консольной команды  доступен метод <a href="./yii-console-controller.html#optionAliases()-detail">yii\console\Controller::optionAliases()</a>,
позволяющий добавлять псевдонимы для опций.</p>
<p>Для того, чтобы задать псевдоним, перекройте метод <a href="./yii-console-controller.html#optionAliases()-detail">yii\console\Controller::optionAliases()</a> в вашем контроллере:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">commands</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">console</span>\<span class="hljs-title">Controller</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-keyword">public</span> $message;
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">options</span><span class="hljs-params">($actionID)</span>
    </span>{
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'message'</span>];
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">optionAliases</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'m'</span> =&gt; <span class="hljs-string">'message'</span>];
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionIndex</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">echo</span> <span class="hljs-keyword">$this</span>-&gt;message . <span class="hljs-string">"\n"</span>;
    }
}
</code></pre>
<p>Теперь для запуска команды можно использовать следующий синтаксис:</p>
<pre><code class="hljs nginx"><span class="hljs-attribute">yii</span> hello -m=hello
</code></pre>
<p>Следующий пример показывает как описывать аргументы:</p>
<pre><code class="hljs php language-php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExampleController</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">yii</span>\<span class="hljs-title">console</span>\<span class="hljs-title">Controller</span>
</span>{
    <span class="hljs-comment">// Команда "yii example/create test" вызовет "actionCreate('test')"</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionCreate</span><span class="hljs-params">($name)</span> </span>{ ... }

    <span class="hljs-comment">// Команда "yii example/index city" вызовет "actionIndex('city', 'name')"</span>
    <span class="hljs-comment">// Команда "yii example/index city id" вызовет "actionIndex('city', 'id')"</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionIndex</span><span class="hljs-params">($category, $order = <span class="hljs-string">'name'</span>)</span> </span>{ ... }

    <span class="hljs-comment">// Команда "yii example/add test" вызовет "actionAdd(['test'])"</span>
    <span class="hljs-comment">// Команда "yii example/add test1,test2" вызовет "actionAdd(['test1', 'test2'])"</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionAdd</span><span class="hljs-params">(array $name)</span> </span>{ ... }
}
</code></pre>
<h3>Код возврата <span id="kod-vozvrata"></span><a href="#kod-vozvrata" class="hashlink">&para;</a></h3><p>При разработке консольного приложения принято использовать код возврата. Принято, код <code>0</code> означает, что команда выполнилась
удачно. Если команда вернула код больше нуля, то это говорит об ошибке. Номер, который был возвращён при ошибке,
потенциально может быть использован для поиска более детальной информации об ошибке.
Для примера <code>1</code> может указывать на неизвестную ошибку, а все коды выше могут быть зарезервированы под специфичные
ошибки: ошибки ввода, повреждённые файлы, и что-то другое.</p>
<p>Для того, чтобы ваша консольная команда возвращала код возврата, просто верните целое число в методе действия контроллера:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">actionIndex</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* возникла проблема */</span>) {
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"Возникла проблема!\n"</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    }
    <span class="hljs-comment">// делаем что-нибудь</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>Есть несколько предопределённых констант, которые вы можете использовать:</p>
<ul>
<li><a href="./yii-console-exitcode.html#OK-detail">ExitCode::OK</a> со значением <code>0</code>;</li>
<li><a href="./yii-console-exitcode.html#UNSPECIFIED_ERROR-detail">ExitCode::UNSPECIFIED_ERROR</a> со значением <code>1</code>.</li>
</ul>
<p>Хорошая практика, определять значимые для вашего контроллера константы в случае, если вы используете больше типов ошибок.</p>
<h3>Форматирование и цвета <span id="formatirovanie-i-cveta"></span><a href="#formatirovanie-i-cveta" class="hashlink">&para;</a></h3><p>Консоль Yii поддерживает форматирование вывода, который автоматически деградирует до не форматированного, если это не поддерживается
в терминале, где запускается команда.</p>
<p>Вывод форматированных строк прост. Вот как можно вывести некоторый жирный текст:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">$this</span>-&gt;stdout(<span class="hljs-string">"Hello?\n"</span>, Console::BOLD);
</code></pre>
<p>Если вам нужно собрать строку динамически объединяя несколько стилей, лучше использовать
<a href="./yii-helpers-baseconsole.html#ansiFormat()-detail">ansiFormat()</a>:</p>
<pre><code class="hljs php language-php">$name = <span class="hljs-keyword">$this</span>-&gt;ansiFormat(<span class="hljs-string">'Alex'</span>, Console::FG_YELLOW);
<span class="hljs-keyword">echo</span> <span class="hljs-string">"Hello, my name is $name."</span>;
</code></pre>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Wed, 09 Dec 2020 00:16:07 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
