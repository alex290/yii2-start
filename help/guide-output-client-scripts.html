<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        
<link href="./assets/1728b664/css/bootstrap.css" rel="stylesheet">
<link href="./assets/9c5d0894/solarized_light.css" rel="stylesheet">
<link href="./assets/f2ce5bcd/style.css" rel="stylesheet">
<script src="./assets/bbf84a7a/jquery.js"></script>
<script src="./assets/1728b664/js/bootstrap.js"></script>
<script src="./assets/fd63b446/jssearch.js"></script>    <title>Работа с клиентскими скриптами - Отображение данных - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w1327" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w1327-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">The Definitive Guide to Yii 2.0</a></div><div id="w1327-collapse" class="collapse navbar-collapse"><ul id="w1328" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Extensions <span class="caret"></span></a><ul id="w1329" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-authclient-index.html" tabindex="-1">authclient</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-elasticsearch-index.html" tabindex="-1">elasticsearch</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-httpclient-index.html" tabindex="-1">httpclient</a></li>
<li><a href="./ext-imagine-index.html" tabindex="-1">imagine</a></li>
<li><a href="./ext-jui-index.html" tabindex="-1">jui</a></li>
<li><a href="./ext-mongodb-index.html" tabindex="-1">mongodb</a></li>
<li><a href="./ext-redis-index.html" tabindex="-1">redis</a></li>
<li><a href="./ext-shell-index.html" tabindex="-1">shell</a></li>
<li><a href="./ext-smarty-index.html" tabindex="-1">smarty</a></li>
<li><a href="./ext-sphinx-index.html" tabindex="-1">sphinx</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li>
<li><a href="./ext-twig-index.html" tabindex="-1">twig</a></li></ul></li>
<li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-1311" data-toggle="collapse" data-parent="#navigation">Введение <b class="caret"></b></a><div id="navigation-1311" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">О Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Обновление с версии 1.1</a></div>
<a class="list-group-item" href="#navigation-1312" data-toggle="collapse" data-parent="#navigation">Первое знакомство <b class="caret"></b></a><div id="navigation-1312" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Установка Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Запуск приложения</a>
<a class="list-group-item" href="./guide-start-hello.html">Говорим «привет»</a>
<a class="list-group-item" href="./guide-start-forms.html">Работа с формами</a>
<a class="list-group-item" href="./guide-start-databases.html">Работа с базами данных</a>
<a class="list-group-item" href="./guide-start-gii.html">Генерация кода при помощи Gii</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Что дальше?</a></div>
<a class="list-group-item" href="#navigation-1313" data-toggle="collapse" data-parent="#navigation">Структура приложения <b class="caret"></b></a><div id="navigation-1313" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Входные скрипты</a>
<a class="list-group-item" href="./guide-structure-applications.html">Приложения</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Компоненты приложения</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Контроллеры</a>
<a class="list-group-item" href="./guide-structure-models.html">Модели</a>
<a class="list-group-item" href="./guide-structure-views.html">Представления</a>
<a class="list-group-item" href="./guide-structure-modules.html">Модули</a>
<a class="list-group-item" href="./guide-structure-filters.html">Фильтры</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Виджеты</a>
<a class="list-group-item" href="./guide-structure-assets.html">Ресурсы</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Расширения</a></div>
<a class="list-group-item" href="#navigation-1314" data-toggle="collapse" data-parent="#navigation">Обработка запросов <b class="caret"></b></a><div id="navigation-1314" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Разбор и генерация URL</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Запросы</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Ответы</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Сессии и куки</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Обработка ошибок</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Логирование</a></div>
<a class="list-group-item" href="#navigation-1315" data-toggle="collapse" data-parent="#navigation">Основные понятия <b class="caret"></b></a><div id="navigation-1315" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">Компоненты</a>
<a class="list-group-item" href="./guide-concept-properties.html">Свойства</a>
<a class="list-group-item" href="./guide-concept-events.html">События</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Поведения</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Конфигурации</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Псевдонимы</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Автозагрузка классов</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-1316" data-toggle="collapse" data-parent="#navigation">Работа с базами данных <b class="caret"></b></a><div id="navigation-1316" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Объекты доступа к данным (DAO)</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Построитель запросов</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Миграции</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-sphinx/blob/master/docs/guide-ru/README.md">Sphinx</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-redis/blob/master/docs/guide-ru/README.md">Redis</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-mongodb/blob/master/docs/guide-ru/README.md">MongoDB</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-elasticsearch/blob/master/docs/guide-ru/README.md">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-1317" data-toggle="collapse" data-parent="#navigation">Получение данных от пользователя <b class="caret"></b></a><div id="navigation-1317" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Создание форм</a>
<a class="list-group-item" href="./guide-input-validation.html">Валидация</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Загрузка файлов</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Табличный ввод</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Работа с несколькими моделями</a>
<a class="list-group-item" href="./guide-input-form-javascript.html">Расширение ActiveForm на стороне клиента</a></div>
<a class="list-group-item active" href="#navigation-1318" data-toggle="collapse" data-parent="#navigation">Отображение данных <b class="caret"></b></a><div id="navigation-1318" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-output-formatting.html">Форматирование данных</a>
<a class="list-group-item" href="./guide-output-pagination.html">Постраничная разбивка</a>
<a class="list-group-item" href="./guide-output-sorting.html">Сортировка</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Провайдеры данных</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Виджеты для данных</a>
<a class="list-group-item active" href="./guide-output-client-scripts.html">Работа с клиентскими скриптами</a>
<a class="list-group-item" href="./guide-output-theming.html">Темизация</a></div>
<a class="list-group-item" href="#navigation-1319" data-toggle="collapse" data-parent="#navigation">Безопасность <b class="caret"></b></a><div id="navigation-1319" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-security-authentication.html">Аутентификация</a>
<a class="list-group-item" href="./guide-security-authorization.html">Авторизация</a>
<a class="list-group-item" href="./guide-security-passwords.html">Работа с паролями</a>
<a class="list-group-item" href="./guide-security-cryptography.html">Криптография</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-authclient/blob/master/docs/guide-ru/README.md">Клиенты авторизации</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Лучшие практики</a></div>
<a class="list-group-item" href="#navigation-1320" data-toggle="collapse" data-parent="#navigation">Кеширование <b class="caret"></b></a><div id="navigation-1320" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-caching-data.html">Кэширование данных</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Кэширование фрагментов</a>
<a class="list-group-item" href="./guide-caching-page.html">Кэширование страниц</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP кэширование</a></div>
<a class="list-group-item" href="#navigation-1321" data-toggle="collapse" data-parent="#navigation">Веб-сервисы REST <b class="caret"></b></a><div id="navigation-1321" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Быстрый старт</a>
<a class="list-group-item" href="./guide-rest-resources.html">Ресурсы</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Контроллеры</a>
<a class="list-group-item" href="./guide-rest-routing.html">Роутинг</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Форматирование ответа</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Аутентификация</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Ограничение частоты запросов</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Версионирование</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Обработка ошибок</a></div>
<a class="list-group-item" href="#navigation-1322" data-toggle="collapse" data-parent="#navigation">Инструменты разработчика <b class="caret"></b></a><div id="navigation-1322" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-debug/blob/master/docs/guide/README.md">Отладочная панель и отладчик</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-gii/blob/master/docs/guide/README.md">Генерация кода с Gii</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-apidoc">Генератор документации API</a></div>
<a class="list-group-item" href="#navigation-1323" data-toggle="collapse" data-parent="#navigation">Тестирование <b class="caret"></b></a><div id="navigation-1323" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Настройка тестового окружения</a>
<a class="list-group-item" href="./guide-test-unit.html">Модульные тесты</a>
<a class="list-group-item" href="./guide-test-functional.html">Функциональные тесты</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Приёмочные тесты</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Фикстуры</a></div>
<a class="list-group-item" href="#navigation-1324" data-toggle="collapse" data-parent="#navigation">Специальные темы <b class="caret"></b></a><div id="navigation-1324" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md">Шаблон приложения advanced</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Создание приложения с нуля</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Консольные команды</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Встроенные валидаторы</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Интернационализация</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Отправка почты</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Оптимизация производительности</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Окружение виртуального хостинга</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Шаблонизаторы</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Работа со сторонним кодом</a>
<a class="list-group-item" href="./guide-tutorial-yii-as-micro-framework.html">Использование Yii в качестве микро-framework&#039;а</a></div>
<a class="list-group-item" href="#navigation-1325" data-toggle="collapse" data-parent="#navigation">Виджеты <b class="caret"></b></a><div id="navigation-1325" class="submenu panel-collapse collapse"><a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html">GridView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-listview.html">ListView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html">DetailView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform">ActiveForm</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html">Pjax</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-menu.html">Menu</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html">LinkPager</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html">LinkSorter</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-ru/README.md">Виджеты Bootstrap</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-ru/README.md">Виджеты Jquery UI</a></div>
<a class="list-group-item" href="#navigation-1326" data-toggle="collapse" data-parent="#navigation">Хелперы <b class="caret"></b></a><div id="navigation-1326" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url хелпер</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Работа с клиентскими скриптами <span id="rabota-s-klientskimi-skriptami"></span><a href="#rabota-s-klientskimi-skriptami" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#register-scripts">Регистрация скриптов</a></li>
<li><a href="#register-css">Регистрация CSS</a></li>
<li><a href="#asset-bundles">Регистрация пакетов ресурсов</a></li>
<li><a href="#dynamic-js">Генерация динамического Javascript</a></li>
<li><a href="#yii.js">Скрипт yii.js</a></li></ol></div>
<p>Современные веб-приложения, помимо статических HTML-страниц, содержат JavaScript, который используется для изменения страницы в браузере путем манипулирования существующими элементами или загрузки нового контента используя AJAX.</p>
<p>В этом разделе описываются методы, предоставляемые Yii для добавления JavaScript и CSS на веб-сайт, а также их динамическая настройка.</p>
<h2>Регистрация скриптов  <span id="register-scripts"></span><a href="#register-scripts" class="hashlink">&para;</a></h2><p>При работе с объектом <a href="./yii-web-view.html">yii\web\View</a> можно динамически регистрировать интерфейсные скрипты.
Для этого есть два специальных метода:</p>
<ul>
<li><a href="./yii-web-view.html#registerJs()-detail">registerJs()</a> для встраиваемых, в тело страницы, скриптов</li>
<li><a href="./yii-web-view.html#registerJsFile()-detail">registerJsFile()</a> для подключаемых, из внешних файлов, скриптов</li>
</ul>
<h3>Регистрация встраиваемых скриптов  <span id="inline-scripts"></span><a href="#inline-scripts" class="hashlink">&para;</a></h3><p>Встраиваемые скрипты полезны для конфигурации динамически генерируемого кода и небольших повторно используемых фрагментов интерфейса, содержащимся в <a href="guide-structure-widgets.html">виджетах</a>.
Для их добавления можно использовать метод <a href="./yii-web-view.html#registerJs()-detail">registerJs()</a> следующим образом:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">$this</span>-&gt;registerJs(
    <span class="hljs-string">"$('#myButton').on('click', function() { alert('Button clicked!'); });"</span>,
    View::POS_READY,
    <span class="hljs-string">'my-button-handler'</span>
);
</code></pre>
<p>Первый аргумент - это JavaScript-код, который мы хотим вставить на страницу. Он будет обёрнут в тег <code>&lt;script&gt;</code>. Второй аргумент определяет, в какой позиции скрипт должен быть вставлен на страницу.
Возможные значения:</p>
<ul>
<li><a href="./yii-web-view.html#POS_HEAD-detail">View::POS_HEAD</a> в <code>&lt;head&gt;</code></li>
<li><a href="./yii-web-view.html#POS_BEGIN-detail">View::POS_BEGIN</a> сразу после открытия тега <code>&lt;body&gt;</code></li>
<li><a href="./yii-web-view.html#POS_END-detail">View::POS_END</a> сразу после закрытия тега <code>&lt;/body&gt;</code></li>
<li><a href="./yii-web-view.html#POS_READY-detail">View::POS_READY</a> для выполнения кода сразу после того, как DOM полностью загрузился. Этому соответствует <a href="http://learn.jquery.com/using-jquery-core/document-ready/">событие <code>ready</code></a>. При этом автоматически зарегистрируется <a href="./yii-web-jqueryasset.html">jQuery</a>. Код будет обёрнут в соответствующий код jQuery. <code>POS_READY</code> является позицией по умолчанию.</li>
<li><a href="./yii-web-view.html#POS_LOAD-detail">View::POS_LOAD</a> для выполнения кода после того, как DOM полностью загрузился (включая картинки). <a href="http://learn.jquery.com/using-jquery-core/document-ready/">Событие <code>load</code></a>. Так же, как и выше, при этом автоматически зарегистрируется <a href="./yii-web-jqueryasset.html">jQuery</a></li>
</ul>
<p>Последний аргумент — это уникальный ID, который используется для идентификации блока со скриптом. При повторной регистрации происходит замена существующего скрипта на новый. Если вы не зададите ID, вместо него будет использоваться сам код. Это помогает избежать регистрации одного и того же кода несколько раз.</p>
<h3>Регистрация внешнего файла скриптов  <span id="script-files"></span><a href="#script-files" class="hashlink">&para;</a></h3><p>Аргументы для <a href="./yii-web-view.html#registerJsFile()-detail">registerJsFile()</a> аналогичны аргументам для <a href="./yii-web-view.html#registerCssFile()-detail">registerCssFile()</a>. В следующем примере мы регистрируем <code>main.js</code> с зависимостью от <a href="./yii-web-jqueryasset.html">yii\web\JqueryAsset</a>. Это означает, что <code>main.js</code> будет добавлен после <code>jquery.js</code>. Без подобного указания зависимостей относительный порядок между <code>main.js</code> и <code>jquery.js</code> будет неопределенным, и код не будет работать.</p>
<p>Внешний скрипт может быть добавлен следующим образом:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">$this</span>-&gt;registerJsFile(
    <span class="hljs-string">'@web/js/main.js'</span>,
    [<span class="hljs-string">'depends'</span> =&gt; [\yii\web\JqueryAsset::className()]]
);
</code></pre>
<p>Вместо <a href="./yii-web-view.html#registerJsFile()-detail">registerJsFile()</a> для регистрации внешних JS-файлов настоятельно рекомендуется использовать <a href="guide-structure-assets.html">пакеты ресурсов</a>, поскольку они обеспечивают лучшую гибкость и более детальную конфигурацию зависимостей. Использование пакетов ресурсов также позволяет объединять и сжимать несколько JS файлов, что желательно для веб-сайтов с высоким трафиком.</p>
<h2>Регистрация CSS  <span id="register-css"></span><a href="#register-css" class="hashlink">&para;</a></h2><p>Подобно JavaScript, вы можете зарегистрировать CSS используя <a href="./yii-web-view.html#registerCss()-detail">registerCss()</a> или <a href="./yii-web-view.html#registerCssFile()-detail">registerCssFile()</a>.
Первый регистрирует блок кода CSS, а второй регистрирует внешний файл CSS.</p>
<h3>Регистрация встроенного CSS  <span id="inline-css"></span><a href="#inline-css" class="hashlink">&para;</a></h3><pre><code class="hljs php language-php"><span class="hljs-keyword">$this</span>-&gt;registerCss(<span class="hljs-string">"body { background: #f00; }"</span>);
</code></pre>
<p>Приведенный выше код добавит следующий код в секцию <code>&lt;head&gt;</code> страницы:</p>
<pre><code class="hljs xml language-html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#f00</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>Если вы хотите задать дополнительные свойства тега style, передайте массив вида «имя =&gt; значение» как второй аргумент.
Последний аргумент — это уникальный ID, который используется для идентификации блока стиля и обеспечения его добавления только один раз в случае, если один и тот же стиль зарегистрирован в разных местах кода.</p>
<h3>Регистрация CSS файлов  <span id="css-files"></span><a href="#css-files" class="hashlink">&para;</a></h3><p>Зарегистрировать CSS файл можно следующим способом:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">$this</span>-&gt;registerCssFile(<span class="hljs-string">"@web/css/themes/black-and-white.css"</span>, [
    <span class="hljs-string">'depends'</span> =&gt; [\yii\bootstrap\BootstrapAsset::className()],
    <span class="hljs-string">'media'</span> =&gt; <span class="hljs-string">'print'</span>,
], <span class="hljs-string">'css-print-theme'</span>);
</code></pre>
<p>Приведенный выше код добавит ссылку на CSS файл <code>/css/themes/black-and-white.css</code> в секцию <code>&lt;head&gt;</code> страницы.</p>
<ul>
<li>Первый аргумент указывает CSS-файл для регистрации. <code>@web</code> в этом примере является <a href="guide-concept-aliases.html#predefined-aliases">псевдонимом для базового URL-адреса приложения</a>.</li>
<li>Второй аргумент указывает атрибуты HTML для результирующего тега <code>&lt;link&gt;</code>. Опция <code>depends</code> обрабатывается специально. Она указывает, от каких пакетов ресурсов зависит этот CSS файл. В этом случае зависимым пакетом ресурсов является <a href="./yii-bootstrap-bootstrapasset.html">BootstrapAsset</a>. Это означает, что CSS файл будет добавлен <em>после</em> CSS файлов из <a href="./yii-bootstrap-bootstrapasset.html">BootstrapAsset</a>.</li>
<li>Последний аргумент указывает ID, идентифицирующий этот CSS файл. Если он не указан, вместо него будет использоваться URL-адрес CSS файла.</li>
</ul>
<p>Для регистрации внешних CSS файлов вместо <a href="./yii-web-view.html#registerCssFile()-detail">registerCssFile()</a> настоятельно рекомендуется использовать <a href="guide-structure-assets.html">пакеты ресурсов</a>. Это позволяет комбинировать и сжимать несколько CSS файлов, что желательно для сайтов с высоким трафиком. Также обеспечивается большая гибкость, поскольку все зависимости ресурсов вашего приложения настраиваются в одном месте.</p>
<h2>Регистрация пакетов ресурсов  <span id="asset-bundles"></span><a href="#asset-bundles" class="hashlink">&para;</a></h2><p>Как упоминалось ранее, рекомендуется использовать пакеты ресурсов вместо регистрации CSS файлов и JavaScript напрямую.
Вы можете получить подробную информацию о том, как определить пакеты ресурсов в разделе <a href="guide-structure-assets.html">"Ресурсы"</a>.</p>
<p>Готовый пакет ресурсов можно использовать так:</p>
<pre><code class="hljs php language-php">\frontend\assets\AppAsset::register(<span class="hljs-keyword">$this</span>);
</code></pre>
<p>В приведенном выше коде, в контексте файла представления, пакет <code>AppAsset</code> зарегистрирован в текущем представлении (<code>$this</code>).
При регистрации пакетов ресурсов из виджета вы должны передать <a href="./yii-base-widget.html#$view-detail">$view</a> виджета, вместо (<code>$this-&gt;view</code>).</p>
<h2>Генерация динамического Javascript  <span id="dynamic-js"></span><a href="#dynamic-js" class="hashlink">&para;</a></h2><p>Часто в файлах шаблонов представлений, HTML-код не записывается напрямую, а генерируется неким PHP-кодом, зависящим от переменных представления.
Для того, чтобы сгенерированный HTML мог работать с Javascript, код JS также должен содержать динамические части, например идентификаторы селекторов jQuery.</p>
<p>Чтобы вставить переменные PHP в код JS, их значения должны быть корректно экранированы. Особенно, когда код JS вставляется в HTML, а не находится в выделенном файле JS.
Для этой цели Yii предоставляет метод <a href="./yii-helpers-basejson.html#htmlEncode()-detail">htmlEncode()</a> хелпера <a href="./yii-helpers-json.html">Json</a>. Его использование будет показано в следующих примерах.</p>
<h3>Регистрация глобальной конфигурации JavaScript  <span id="js-configuration"></span><a href="#js-configuration" class="hashlink">&para;</a></h3><p>В этом примере мы используем массив для передачи глобальных параметров конфигурации из PHP-части приложения в код интерфейса JS.</p>
<pre><code class="hljs php language-php">$options = [
    <span class="hljs-string">'appName'</span> =&gt; Yii::$app-&gt;name,
    <span class="hljs-string">'baseUrl'</span> =&gt; Yii::$app-&gt;request-&gt;baseUrl,
    <span class="hljs-string">'language'</span> =&gt; Yii::$app-&gt;language,
    <span class="hljs-comment">// ...</span>
];
<span class="hljs-keyword">$this</span>-&gt;registerJs(
    <span class="hljs-string">"var yiiOptions = "</span>.\yii\helpers\Json::htmlEncode($options).<span class="hljs-string">";"</span>,
    View::POS_HEAD,
    <span class="hljs-string">'yiiOptions'</span>
);
</code></pre>
<p>Приведенный выше код зарегистрирует тег <code>&lt;script&gt;</code>, содержащий определение переменной JavaScript, например:</p>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">var</span> yiiOptions = {<span class="hljs-string">"appName"</span>:<span class="hljs-string">"My Yii Application"</span>,<span class="hljs-string">"baseUrl"</span>:<span class="hljs-string">"/basic/web"</span>,<span class="hljs-string">"language"</span>:<span class="hljs-string">"en"</span>};
</code></pre>
<p>Теперь в вашем JavaScript коде вы можете получить к ним доступ, например: <code>yiiOptions.baseUrl</code> или <code>yiiOptions.language</code>.</p>
<h3>Передача сообщений перевода  <span id="translated-messages"></span><a href="#translated-messages" class="hashlink">&para;</a></h3><p>Вы можете столкнуться со случаем, когда ваш JavaScript должен вывести сообщение, реагирующее на какое-то событие. В приложении, которое работает с несколькими языками, эта строка должна быть переведена на текущий язык приложения.
Один из способов достичь этого — использовать <a href="guide-tutorial-i18n.html#message-translation">интернационализацию</a>, предоставляемую Yii и передавать результат в код JavaScript.</p>
<pre><code class="hljs php language-php">$message = \yii\helpers\Json::htmlEncode(
    \Yii::t(<span class="hljs-string">'app'</span>, <span class="hljs-string">'Button clicked!'</span>)
);
<span class="hljs-keyword">$this</span>-&gt;registerJs(<span class="hljs-string">&lt;&lt;&lt;JS
    $('#myButton').on('click', function() { alert( <span class="hljs-subst">$message</span> ); });
JS</span>
);
</code></pre>
<p>Приведенный выше пример кода использует PHP <a href="https://secure.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc">синтаксис Heredoc</a> для лучшей читаемости. Это также обеспечивает лучшую подсветку синтаксиса в большинстве IDE, поэтому это предпочтительный способ написания встроенного JavaScript, особенно полезный для кода, более длинного чем однострочный. Переменная <code>$message</code> создается PHP и благодаря <a href="./yii-helpers-basejson.html#htmlEncode()-detail">Json::htmlEncode</a> содержит строку в допустимом синтаксисе JS, которую можно вставить в JavaScript код, чтобы поместить динамическую строку в вызов функции <code>alert()</code>.</p>
<blockquote class="note"><p><strong>Примечание: </strong>При использовании Heredoc, будьте осторожны с именами переменных в коде JS, поскольку переменные, начинающиеся с <code>$</code>, могут интерпретироваться как переменные PHP, которые будут заменены их содержимым.
jQuery функция в форме <code>$(</code> или <code>$.</code> не интерпретируется как переменная PHP и может безопасно использоваться.</p>
</blockquote>
<h2>Скрипт <code>yii.js</code> <span id="yii.js"></span><a href="#yii.js" class="hashlink">&para;</a></h2><blockquote class="note"><p><strong>Примечание: </strong>Этот раздел еще не написан. Он должен содержать объяснение функциональности, предоставляемой <code>yii.js</code>:</p>
<ul>
<li>JavaScript модули Yii</li>
<li>Обработчик параметра CSRF</li>
<li>Обработчик <code>data-confirm</code></li>
<li>Обработчик <code>data-method</code></li>
<li>Фильтрация скриптов</li>
<li>Обработка перенаправления</li>
</ul>
</blockquote>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Wed, 09 Dec 2020 00:16:07 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
