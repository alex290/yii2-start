<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        
<link href="./assets/1728b664/css/bootstrap.css" rel="stylesheet">
<link href="./assets/9c5d0894/solarized_light.css" rel="stylesheet">
<link href="./assets/f2ce5bcd/style.css" rel="stylesheet">
<script src="./assets/bbf84a7a/jquery.js"></script>
<script src="./assets/1728b664/js/bootstrap.js"></script>
<script src="./assets/fd63b446/jssearch.js"></script>    <title>Поведения - Основные понятия - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w1118" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w1118-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">The Definitive Guide to Yii 2.0</a></div><div id="w1118-collapse" class="collapse navbar-collapse"><ul id="w1119" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Extensions <span class="caret"></span></a><ul id="w1120" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-authclient-index.html" tabindex="-1">authclient</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-elasticsearch-index.html" tabindex="-1">elasticsearch</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-httpclient-index.html" tabindex="-1">httpclient</a></li>
<li><a href="./ext-imagine-index.html" tabindex="-1">imagine</a></li>
<li><a href="./ext-jui-index.html" tabindex="-1">jui</a></li>
<li><a href="./ext-mongodb-index.html" tabindex="-1">mongodb</a></li>
<li><a href="./ext-redis-index.html" tabindex="-1">redis</a></li>
<li><a href="./ext-shell-index.html" tabindex="-1">shell</a></li>
<li><a href="./ext-smarty-index.html" tabindex="-1">smarty</a></li>
<li><a href="./ext-sphinx-index.html" tabindex="-1">sphinx</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li>
<li><a href="./ext-twig-index.html" tabindex="-1">twig</a></li></ul></li>
<li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-1102" data-toggle="collapse" data-parent="#navigation">Введение <b class="caret"></b></a><div id="navigation-1102" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">О Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Обновление с версии 1.1</a></div>
<a class="list-group-item" href="#navigation-1103" data-toggle="collapse" data-parent="#navigation">Первое знакомство <b class="caret"></b></a><div id="navigation-1103" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Установка Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Запуск приложения</a>
<a class="list-group-item" href="./guide-start-hello.html">Говорим «привет»</a>
<a class="list-group-item" href="./guide-start-forms.html">Работа с формами</a>
<a class="list-group-item" href="./guide-start-databases.html">Работа с базами данных</a>
<a class="list-group-item" href="./guide-start-gii.html">Генерация кода при помощи Gii</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Что дальше?</a></div>
<a class="list-group-item" href="#navigation-1104" data-toggle="collapse" data-parent="#navigation">Структура приложения <b class="caret"></b></a><div id="navigation-1104" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Входные скрипты</a>
<a class="list-group-item" href="./guide-structure-applications.html">Приложения</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Компоненты приложения</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Контроллеры</a>
<a class="list-group-item" href="./guide-structure-models.html">Модели</a>
<a class="list-group-item" href="./guide-structure-views.html">Представления</a>
<a class="list-group-item" href="./guide-structure-modules.html">Модули</a>
<a class="list-group-item" href="./guide-structure-filters.html">Фильтры</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Виджеты</a>
<a class="list-group-item" href="./guide-structure-assets.html">Ресурсы</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Расширения</a></div>
<a class="list-group-item" href="#navigation-1105" data-toggle="collapse" data-parent="#navigation">Обработка запросов <b class="caret"></b></a><div id="navigation-1105" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Разбор и генерация URL</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Запросы</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Ответы</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Сессии и куки</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Обработка ошибок</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Логирование</a></div>
<a class="list-group-item active" href="#navigation-1106" data-toggle="collapse" data-parent="#navigation">Основные понятия <b class="caret"></b></a><div id="navigation-1106" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-concept-components.html">Компоненты</a>
<a class="list-group-item" href="./guide-concept-properties.html">Свойства</a>
<a class="list-group-item" href="./guide-concept-events.html">События</a>
<a class="list-group-item active" href="./guide-concept-behaviors.html">Поведения</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Конфигурации</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Псевдонимы</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Автозагрузка классов</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-1107" data-toggle="collapse" data-parent="#navigation">Работа с базами данных <b class="caret"></b></a><div id="navigation-1107" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Объекты доступа к данным (DAO)</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Построитель запросов</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Миграции</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-sphinx/blob/master/docs/guide-ru/README.md">Sphinx</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-redis/blob/master/docs/guide-ru/README.md">Redis</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-mongodb/blob/master/docs/guide-ru/README.md">MongoDB</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-elasticsearch/blob/master/docs/guide-ru/README.md">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-1108" data-toggle="collapse" data-parent="#navigation">Получение данных от пользователя <b class="caret"></b></a><div id="navigation-1108" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Создание форм</a>
<a class="list-group-item" href="./guide-input-validation.html">Валидация</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Загрузка файлов</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Табличный ввод</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Работа с несколькими моделями</a>
<a class="list-group-item" href="./guide-input-form-javascript.html">Расширение ActiveForm на стороне клиента</a></div>
<a class="list-group-item" href="#navigation-1109" data-toggle="collapse" data-parent="#navigation">Отображение данных <b class="caret"></b></a><div id="navigation-1109" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatting.html">Форматирование данных</a>
<a class="list-group-item" href="./guide-output-pagination.html">Постраничная разбивка</a>
<a class="list-group-item" href="./guide-output-sorting.html">Сортировка</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Провайдеры данных</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Виджеты для данных</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Работа с клиентскими скриптами</a>
<a class="list-group-item" href="./guide-output-theming.html">Темизация</a></div>
<a class="list-group-item" href="#navigation-1110" data-toggle="collapse" data-parent="#navigation">Безопасность <b class="caret"></b></a><div id="navigation-1110" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-security-authentication.html">Аутентификация</a>
<a class="list-group-item" href="./guide-security-authorization.html">Авторизация</a>
<a class="list-group-item" href="./guide-security-passwords.html">Работа с паролями</a>
<a class="list-group-item" href="./guide-security-cryptography.html">Криптография</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-authclient/blob/master/docs/guide-ru/README.md">Клиенты авторизации</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Лучшие практики</a></div>
<a class="list-group-item" href="#navigation-1111" data-toggle="collapse" data-parent="#navigation">Кеширование <b class="caret"></b></a><div id="navigation-1111" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-caching-data.html">Кэширование данных</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Кэширование фрагментов</a>
<a class="list-group-item" href="./guide-caching-page.html">Кэширование страниц</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP кэширование</a></div>
<a class="list-group-item" href="#navigation-1112" data-toggle="collapse" data-parent="#navigation">Веб-сервисы REST <b class="caret"></b></a><div id="navigation-1112" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Быстрый старт</a>
<a class="list-group-item" href="./guide-rest-resources.html">Ресурсы</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Контроллеры</a>
<a class="list-group-item" href="./guide-rest-routing.html">Роутинг</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Форматирование ответа</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Аутентификация</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Ограничение частоты запросов</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Версионирование</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Обработка ошибок</a></div>
<a class="list-group-item" href="#navigation-1113" data-toggle="collapse" data-parent="#navigation">Инструменты разработчика <b class="caret"></b></a><div id="navigation-1113" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-debug/blob/master/docs/guide/README.md">Отладочная панель и отладчик</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-gii/blob/master/docs/guide/README.md">Генерация кода с Gii</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-apidoc">Генератор документации API</a></div>
<a class="list-group-item" href="#navigation-1114" data-toggle="collapse" data-parent="#navigation">Тестирование <b class="caret"></b></a><div id="navigation-1114" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Настройка тестового окружения</a>
<a class="list-group-item" href="./guide-test-unit.html">Модульные тесты</a>
<a class="list-group-item" href="./guide-test-functional.html">Функциональные тесты</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Приёмочные тесты</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Фикстуры</a></div>
<a class="list-group-item" href="#navigation-1115" data-toggle="collapse" data-parent="#navigation">Специальные темы <b class="caret"></b></a><div id="navigation-1115" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-app-advanced/blob/master/docs/guide/README.md">Шаблон приложения advanced</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Создание приложения с нуля</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Консольные команды</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Встроенные валидаторы</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Интернационализация</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Отправка почты</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Оптимизация производительности</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Окружение виртуального хостинга</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Шаблонизаторы</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Работа со сторонним кодом</a>
<a class="list-group-item" href="./guide-tutorial-yii-as-micro-framework.html">Использование Yii в качестве микро-framework&#039;а</a></div>
<a class="list-group-item" href="#navigation-1116" data-toggle="collapse" data-parent="#navigation">Виджеты <b class="caret"></b></a><div id="navigation-1116" class="submenu panel-collapse collapse"><a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-grid-gridview.html">GridView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-listview.html">ListView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html">DetailView</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform">ActiveForm</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html">Pjax</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-menu.html">Menu</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html">LinkPager</a>
<a class="list-group-item" href="http://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html">LinkSorter</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-ru/README.md">Виджеты Bootstrap</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-ru/README.md">Виджеты Jquery UI</a></div>
<a class="list-group-item" href="#navigation-1117" data-toggle="collapse" data-parent="#navigation">Хелперы <b class="caret"></b></a><div id="navigation-1117" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Обзор</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url хелпер</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Поведения <span id="povedenia"></span><a href="#povedenia" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#defining-behaviors">Создание поведений</a></li>
<li><a href="#obrabotka-sobytij-komponenta">Обработка событий компонента</a></li>
<li><a href="#attaching-behaviors">Прикрепление поведений</a></li>
<li><a href="#using-behaviors">Использование поведений</a></li>
<li><a href="#detaching-behaviors">Отвязывание поведений</a></li>
<li><a href="#using-timestamp-behavior">Использование поведения TimestampBehavior</a></li>
<li><a href="#drugie-povedenia">Другие поведения</a></li>
<li><a href="#comparison-with-traits">Сравнение с трейтами</a></li></ol></div>
<p>Поведения (behaviors) — это экземпляры класса <a href="./yii-base-behavior.html">yii\base\Behavior</a> или класса, унаследованного от него. Поведения,
также известные как <a href="http://ru.wikipedia.org/wiki/Примесь_(программирование)">примеси</a>, позволяют расширять 
функциональность существующих <a href="./yii-base-component.html">компонентов</a> без необходимости изменения дерева наследования.
После прикрепления поведения к компоненту, его методы и свойства "внедряются" в компонент, и становятся доступными
так же, как если бы они были объявлены в самом классе компонента. Кроме того, поведение может реагировать на 
<a href="guide-concept-events.html">события</a>, создаваемые компонентом, что позволяет тонко настраивать или модифицировать 
обычное выполнение кода компонента.</p>
<h2>Создание поведений  <span id="defining-behaviors"></span><a href="#defining-behaviors" class="hashlink">&para;</a></h2><p>Поведения создаются путем расширения базового класса <a href="./yii-base-behavior.html">yii\base\Behavior</a> или его наследников. Например,</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">base</span>\<span class="hljs-title">Behavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBehavior</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Behavior</span>
</span>{
    <span class="hljs-keyword">public</span> $prop1;

    <span class="hljs-keyword">private</span> $_prop2;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProp2</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_prop2;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProp2</span><span class="hljs-params">($value)</span>
    </span>{
        <span class="hljs-keyword">$this</span>-&gt;_prop2 = $value;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p>В приведенном выше примере, объявлен класс поведения <code>app\components\MyBehavior</code> содержащий 2 свойства
<code>prop1</code> и <code>prop2</code>, и один метод <code>foo()</code>. Обратите внимание, свойство <code>prop2</code> объявлено с использованием геттера
<code>getProp2()</code> и сеттера <code>setProp2()</code>. Это возможно, так как <a href="./yii-base-behavior.html">yii\base\Behavior</a> является дочерним классом для
<a href="./yii-base-baseobject.html">yii\base\BaseObject</a>, который предоставляет возможность определения <a href="guide-concept-properties.html">свойств</a> через геттеры и сеттеры.</p>
<p>Так как этот класс является поведением, когда он прикреплён к компоненту, компоненту будут также доступны свойства <code>prop1</code>
и <code>prop2</code>, а также метод <code>foo()</code>.</p>
<blockquote class="tip"><p><strong>Подсказка: </strong>Внутри поведения возможно обращаться к компоненту, к которому оно прикреплено, используя свойство
  <a href="./yii-base-behavior.html#$owner-detail">yii\base\Behavior::$owner</a>.</p>
</blockquote>
<blockquote class="note"><p><strong>Примечание: </strong>При переопределении метода поведения <a href="./yii-base-baseobject.html#__get()-detail">yii\base\Behavior::__get()</a> и/или <a href="./yii-base-baseobject.html#__set()-detail">yii\base\Behavior::__set()</a> необходимо
также переопределить <a href="./yii-base-baseobject.html#canGetProperty()-detail">yii\base\Behavior::canGetProperty()</a> и/или <a href="./yii-base-baseobject.html#canSetProperty()-detail">yii\base\Behavior::canSetProperty()</a>.</p>
</blockquote>
<h2>Обработка событий компонента <span id="obrabotka-sobytij-komponenta"></span><a href="#obrabotka-sobytij-komponenta" class="hashlink">&para;</a></h2><p>Если поведению требуется реагировать на события компонента, к которому оно прикреплено, то необходимо переопределить
метод <a href="./yii-base-behavior.html#events()-detail">yii\base\Behavior::events()</a>. Например,</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">db</span>\<span class="hljs-title">ActiveRecord</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">base</span>\<span class="hljs-title">Behavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBehavior</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Behavior</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">events</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            ActiveRecord::EVENT_BEFORE_VALIDATE =&gt; <span class="hljs-string">'beforeValidate'</span>,
        ];
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeValidate</span><span class="hljs-params">($event)</span>
    </span>{
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p>Метод <a href="./yii-base-behavior.html#events()-detail">events()</a> должен возвращать список событий и соответствующих им обработчиков.
В приведенном выше примере, объявлено событие <a href="./yii-base-model.html#EVENT_BEFORE_VALIDATE-detail">EVENT_BEFORE_VALIDATE</a>
и его обработчик <code>beforeValidate()</code>. Указать обработчик события, можно одним из следующих способов:</p>
<ul>
<li>строка с именем метода текущего поведения, как в примере выше;</li>
<li>массив, содержащий объект или имя класса, и имя метода, например, <code>[$object, 'methodName']</code>;</li>
<li>анонимная функция.</li>
</ul>
<p>Функция обработчика события должна выглядеть как показано ниже, где <code>$event</code> содержит параметр
события. Более детальная информация приведена в разделе <a href="guide-concept-events.html">События</a>.</p>
<pre><code class="hljs php language-php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($event)</span> </span>{
}
</code></pre>
<h2>Прикрепление поведений  <span id="attaching-behaviors"></span><a href="#attaching-behaviors" class="hashlink">&para;</a></h2><p>Прикрепить поведение к <a href="./yii-base-component.html">компоненту</a> можно как статически, так и динамически. На практике
чаще используется статическое прикрепление.</p>
<p>Для того чтобы прикрепить поведение статически, необходимо переопределить метод <a href="./yii-base-component.html#behaviors()-detail">behaviors()</a>
компонента, к которому его планируется прикрепить. Метод <a href="./yii-base-component.html#behaviors()-detail">behaviors()</a> должен возвращать
список <a href="guide-concept-configurations.html">конфигураций</a> поведений.  Конфигурация поведения представляет собой имя класса поведения,
либо массив его настроек:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">db</span>\<span class="hljs-title">ActiveRecord</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>\<span class="hljs-title">MyBehavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ActiveRecord</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviors</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-comment">// анонимное поведение, прикрепленное по имени класса</span>
            MyBehavior::className(),

            <span class="hljs-comment">// именованное поведение, прикрепленное по имени класса</span>
            <span class="hljs-string">'myBehavior2'</span> =&gt; MyBehavior::className(),

            <span class="hljs-comment">// анонимное поведение, сконфигурированное с использованием массива</span>
            [
                <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
                <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
                <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
            ],

            <span class="hljs-comment">// именованное поведение, сконфигурированное с использованием массива</span>
            <span class="hljs-string">'myBehavior4'</span> =&gt; [
                <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
                <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
                <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
            ]
        ];
    }
}
</code></pre>
<p>Вы можете связать имя с поведением, указав его в качестве ключа элемента массива, соответствующего конфигурации
поведения. В таком случае, поведение называется <em>именованным</em>. В примере выше,
два именованных поведения: <code>myBehavior2</code> и <code>myBehavior4</code>. Если с поведением не связано имя, такое поведение называется
<em>анонимным</em>.</p>
<p>Для того, чтобы прикрепить поведение динамически, необходимо вызвать метод <a href="./yii-base-component.html#attachBehavior()-detail">yii\base\Component::attachBehavior()</a>
требуемого компонента:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>\<span class="hljs-title">MyBehavior</span>;

<span class="hljs-comment">// прикрепляем объект поведения</span>
$component-&gt;attachBehavior(<span class="hljs-string">'myBehavior1'</span>, <span class="hljs-keyword">new</span> MyBehavior);

<span class="hljs-comment">// прикрепляем по имени класса поведения</span>
$component-&gt;attachBehavior(<span class="hljs-string">'myBehavior2'</span>, MyBehavior::className());

<span class="hljs-comment">// прикрепляем используя массив конфигураций</span>
$component-&gt;attachBehavior(<span class="hljs-string">'myBehavior3'</span>, [
    <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
    <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
    <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
]);
</code></pre>
<p>Использование метода <a href="./yii-base-component.html#attachBehaviors()-detail">yii\base\Component::attachBehaviors()</a> позволяет прикрепить несколько поведений за раз.
Например,</p>
<pre><code class="hljs php language-php">$component-&gt;attachBehaviors([
    <span class="hljs-string">'myBehavior1'</span> =&gt; <span class="hljs-keyword">new</span> MyBehavior,  <span class="hljs-comment">// именованное поведение</span>
    MyBehavior::className(),          <span class="hljs-comment">// анонимное поведение</span>
]);
</code></pre>
<p>Так же, прикрепить поведение к компоненту можно через <a href="guide-concept-configurations.html">конфигурацию</a>, как показано ниже:</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'as myBehavior2'</span> =&gt; MyBehavior::className(),

    <span class="hljs-string">'as myBehavior3'</span> =&gt; [
        <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
        <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
        <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
    ],
]
</code></pre>
<p>Более детальная информация приведена в разделе <a href="guide-concept-configurations.html#configuration-format">Конфигурации</a>.</p>
<h2>Использование поведений  <span id="using-behaviors"></span><a href="#using-behaviors" class="hashlink">&para;</a></h2><p>Для использования поведения, его необходимо прикрепить к <a href="./yii-base-component.html">компоненту</a> как описано выше. После того,
как поведение прикреплено к компоненту, его использование не вызывает сложностей.</p>
<p>Вы можете обращаться к <em>публичным</em> переменным или <a href="guide-concept-properties.html">свойствам</a>, объявленным с использованием 
геттеров и сеттеров в поведении, через компонент, к которому оно прикреплено:</p>
<pre><code class="hljs php language-php"><span class="hljs-comment">// публичное свойство "prop1" объявленное в классе поведения</span>
<span class="hljs-keyword">echo</span> $component-&gt;prop1;
$component-&gt;prop1 = $value;
</code></pre>
<p>Аналогично, вы можете вызывать <em>публичные</em> методы поведения,</p>
<pre><code class="hljs php language-php"><span class="hljs-comment">// публичный метод foo() объявленный в классе поведения</span>
$component-&gt;foo();
</code></pre>
<p>Обратите внимание, хотя <code>$component</code> не имеет свойства <code>prop1</code> и метода <code>foo()</code>, они могут быть использованы,
как будто являются членами этого класса.</p>
<p>В случае, когда два поведения, имеющие свойства или методы с одинаковыми именами, прикреплены к одному компоненту, 
преимущество будет у поведения, прикрепленного раньше.</p>
<p>Если при прикреплении поведения к компоненту указано имя, можно обращаться к поведению по этому имени, как показано ниже:</p>
<pre><code class="hljs php language-php">$behavior = $component-&gt;getBehavior(<span class="hljs-string">'myBehavior'</span>);
</code></pre>
<p>Также можно получить все поведения, прикрепленные к компоненту:</p>
<pre><code class="hljs php language-php">$behaviors = $component-&gt;getBehaviors();
</code></pre>
<h2>Отвязывание поведений <span id="detaching-behaviors"></span><a href="#detaching-behaviors" class="hashlink">&para;</a></h2><p>Чтобы отвязать поведение от компонента, необходимо вызвать метод <a href="./yii-base-component.html#detachBehavior()-detail">yii\base\Component::detachBehavior()</a>, указав имя,
связанное с поведением:</p>
<pre><code class="hljs php language-php">$component-&gt;detachBehavior(<span class="hljs-string">'myBehavior1'</span>);
</code></pre>
<p>Так же, возможно отвязать <em>все</em> поведения:</p>
<pre><code class="hljs php language-php">$component-&gt;detachBehaviors();
</code></pre>
<h2>Использование поведения <code>TimestampBehavior</code>  <span id="using-timestamp-behavior"></span><a href="#using-timestamp-behavior" class="hashlink">&para;</a></h2><p>В заключении, давайте посмотрим на <a href="./yii-behaviors-timestampbehavior.html">yii\behaviors\TimestampBehavior</a> — поведение, которое позволяет автоматически
обновлять атрибуты с метками времени при сохранении <a href="./yii-db-activerecord.html">Active Record</a> моделей через <code>insert()</code>,
<code>update()</code> или <code>save()</code>.</p>
<p>Для начала, необходимо прикрепить поведение к классу <a href="./yii-db-activerecord.html">Active Record</a>, в котором это необходимо:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">models</span>\<span class="hljs-title">User</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">db</span>\<span class="hljs-title">ActiveRecord</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">behaviors</span>\<span class="hljs-title">TimestampBehavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ActiveRecord</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviors</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            [
                <span class="hljs-string">'class'</span> =&gt; TimestampBehavior::className(),
                <span class="hljs-string">'attributes'</span> =&gt; [
                    ActiveRecord::EVENT_BEFORE_INSERT =&gt; [<span class="hljs-string">'created_at'</span>, <span class="hljs-string">'updated_at'</span>],
                    ActiveRecord::EVENT_BEFORE_UPDATE =&gt; [<span class="hljs-string">'updated_at'</span>],
                ],
                <span class="hljs-comment">// если вместо метки времени UNIX используется datetime:</span>
                <span class="hljs-comment">// 'value' =&gt; new Expression('NOW()'),</span>
            ],
        ];
    }
}
</code></pre>
<p>Конфигурация выше описывает следующее:</p>
<ul>
<li>при вставке новой записи поведение должно присвоить текущую метку времени UNIX атрибутам  <code>created_at</code> и <code>updated_at</code>;</li>
<li>при обновлении существующей записи поведение должно присвоить текущую метку времени UNIX атрибуту <code>updated_at</code>.</li>
</ul>
<blockquote class="note"><p><strong>Примечание: </strong>Для того, чтобы приведённая выше конфигурация работала с MySQL, тип <code>created_at</code> и <code>updated_at</code> должен быть
  <code>int(11)</code>. В нём будет храниться UNIX timestamp.</p>
</blockquote>
<p>Теперь, если сохранить объект <code>User</code>, то в его атрибуты <code>created_at</code> и <code>updated_at</code> будут автоматически установлены
значения метки времени UNIX на момент сохранения записи:</p>
<pre><code class="hljs php language-php">$user = <span class="hljs-keyword">new</span> User;
$user-&gt;email = <span class="hljs-string">'test@example.com'</span>;
$user-&gt;save();
<span class="hljs-keyword">echo</span> $user-&gt;created_at;  <span class="hljs-comment">// выведет метку времени на момент сохранения записи</span>
</code></pre>
<p>Поведение <a href="./yii-behaviors-timestampbehavior.html">TimestampBehavior</a> так же содержит полезный метод
<a href="./yii-behaviors-timestampbehavior.html#touch()-detail">touch()</a>, который устанавливает текущую метку времени указанному атрибуту
и сохраняет его в базу данных:</p>
<pre><code class="hljs php language-php">$user-&gt;touch(<span class="hljs-string">'login_time'</span>);
</code></pre>
<h2>Другие поведения <span id="drugie-povedenia"></span><a href="#drugie-povedenia" class="hashlink">&para;</a></h2><p>Кроме затронутых выше, есть и другие уже реализованные поведения. Как встроенные, так и
сторонние:</p>
<ul>
<li><a href="./yii-behaviors-blameablebehavior.html">yii\behaviors\BlameableBehavior</a> - автоматически заполняет указанные атрибуты ID текущего пользователя.</li>
<li><a href="./yii-behaviors-sluggablebehavior.html">yii\behaviors\SluggableBehavior</a> - автоматически заполняет указанные атрибут пригодным для URL текстом, получаемым
из другого атрибута.</li>
<li><a href="./yii-behaviors-attributebehavior.html">yii\behaviors\AttributeBehavior</a> - автоматически задаёт указанное значение одному или нескольким атрибутам
ActiveRecord при срабатывании определённых событий.</li>
<li><a href="https://github.com/yii2tech/ar-softdelete">yii2tech\ar\softdelete\SoftDeleteBehavior</a> - предоставляет методы для
«мягкого» удаления и воосстановления ActiveRecord. То есть выставляет статус или флаг, который показывает, что
запись удалена.</li>
<li><a href="https://github.com/yii2tech/ar-position">yii2tech\ar\position\PositionBehavior</a> - позволяет управлять порядком
записей через специальные методы. Информация сохраняется в целочисленном поле.</li>
</ul>
<h2>Сравнение с трейтами  <span id="comparison-with-traits"></span><a href="#comparison-with-traits" class="hashlink">&para;</a></h2><p>Несмотря на то, что поведения схожи с <a href="https://secure.php.net/manual/ru/language.oop5.traits.php">трейтами</a> тем, что 
"внедряют" свои свойства и методы в основной класс, они имеют множество отличий. Они оба имеют свои плюсы и минусы, 
и, скорее, дополняют друг друга, а не заменяют.</p>
<h3>Плюсы поведений  <span id="pros-for-behaviors"></span><a href="#pros-for-behaviors" class="hashlink">&para;</a></h3><p>Поведения, как и любые другие классы, поддерживают наследование. Трейты можно рассматривать как копипейст
на уровне языка. Они наследование не поддерживают.</p>
<p>Поведения могут быть прикреплены и отвязаны от компонента динамически, без необходимости модифицирования класса 
компонента. Для использования трейтов необходимо модифицировать класс.</p>
<p>Поведения, в отличие от трейтов, можно настраивать.</p>
<p>Поведения можно настраивать таким образом, чтобы они реагировали на события компонента.</p>
<p>Конфликты имен свойств и методов поведений, прикрепленных к компоненту, разрешаются на основе порядка их подключения.
Конфликты имен, вызванные различными трейтами, требуют ручного переименования конфликтующих свойств или методов.</p>
<h3>Плюсы трейтов  <span id="pros-for-traits"></span><a href="#pros-for-traits" class="hashlink">&para;</a></h3><p>Трейты являются гораздо более производительными, чем поведения, которые, являясь объектами, требуют 
дополнительного времени и памяти.</p>
<p>Многие IDE поддерживают работу с трейтами, так как они являются стандартными конструкциями языка.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Wed, 09 Dec 2020 00:16:06 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
